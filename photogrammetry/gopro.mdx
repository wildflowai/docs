---
title: "[DRAFT] Protocol G503"
sidebarTitle: "Protocol (2 GoPro)"
icon: "send-back"
---

<Warning>
  This page is still work in progress. We'll add illustrations and more
  information shortly.
</Warning>

**See [Google Doc Draft](https://docs.google.com/document/d/1RRp8WW57GA3YNpmtCZXTdQMtw8AuW0wYHAKb16pSKRk/edit) for comments.**

This page: [wildflow.ai/protocol](https://wildflow.ai/protocol)

**How to capture a 3D model of coral reef using just two GoPros.** A simple, low-cost way of creating permanent high-res snapshots of coral reefs for divers using photogrammetry. Data collection protocol that could be repeated every few months/years.

**Why:** This allows monitoring hectares of coral reefs with sub-centimeter resolution: identifying corals (species/genuses classification), benthic cover (rock, sand), detecting diseases and their spread. We can track coral demography through time, calculate growth rates, and guide human activities to protect, restore and enhance ecosystems at scale. Fusing 3D data with other modalities such as acoustics, genomics and environmental data (water temperature, salinity, dissolved oxygen etc.) unlocks a comprehensive understanding of coral community and ecosystem dynamics, and how to protect and restore the ecosystem.

**Method:** We did not invent this method. It's a collection of best practices inspired by the awesome work of the MARS [buildingcoral.com](https://buildingcoral.com) team, AIMS, Scripps, Perry Institute and other reef-loving folks. Feel free to follow your favourite protocol. We just providing a simple end-to-end tutorial of how you can collect the data, so that you don't have to think hard about all the tradeoffs (we did it for you). If you follow it, it's guaranteed we can process the data and reconstruct you a high-resolution model, show changes over time, and provide all the insights.

**Quadrat**: let's call the mapping area a "quadrat" for simplicty (we'll use it from now on). We suggest imaging **25x25 meter patches** -- a perfect size for a diving team to explore in one go. If you want to go bigger, go for it! Our system can handle hectares of data from underwater robots. The main limit here is how long the imaging team could stay underwater in one dive. Please don't push it.

<Warning>
  <h3>
    Safety first! Never dive alone. Follow standard scuba diving procedures.
    Make sure everyone on the team is certified and feeling well. Corals need
    you alive!
  </h3>
</Warning>

# Equipment

ðŸ”µ **Cameras:** 2 GoPro HERO 10 or better ([example GoPro 13](https://gopro.com/en/gb/shop/cameras/learn/hero13black/CHDHX-131-master.html)) with accessories:

- 2 underwater housings for cameras ([example](https://gopro.com/en/gb/shop/mounts-accessories/protective-housing-plus-waterproof-case/ADDIV-001.html))
- 2 batteries ([example](%20https://gopro.com/en/gb/shop/mounts-accessories/enduro-battery-2pack/AEBAT-201.html)) and 1 charger ([example](https://gopro.com/en/gb/shop/mounts-accessories/hero13-black-dual-battery-charger-enduro-batteries/AEDBD-201-master.html))
- 2 handlebar mount ([example](https://gopro.com/en/gb/shop/mounts-accessories/handlebar-seatpost-pole-mount/AGTSM-001.html))
- 2+ SD cards (**V30 or faster** please)

  A 25x25m quadrat requires up to 20GB per camera.

  A 128GB card is perfect for 6 quadrats.

  <Warning>
    Avoid those massive 1TB cards or slow ones -- they might cause hiccups
    during your dive. Test your setup on land by recording for a full hour, just
    to be sure\!
  </Warning>

ðŸ”µ **Camera Rig** -- A simple 60cm bar will do the trick. Make sure both cameras are facing the same way (downward, please) and perfectly parallel (not tilted towards each other). We use a plastic water pipe. A mop handle would do even better.

ðŸ”µ **Scalebars** -- Markers that help scale 3D model. So we know the correct size of everything. For a 25x25m area, you only need 5 (soft recommendation). You can make them yourself using a metal workshop and a sticker printer for waterproof labels (like those for boats or cars). We prefer this dumbbell-shaped design where each end displays/encodes a unique number (automatically understood by computer). The centers of the two circles must be exactly 300mm apart. If you can't make these markers, any object with a known length works (even a shoe), but you'll have to measure it manually and tell us its length and where it is on the reef.

ðŸ”µ **Colour Charts** -- Placed in the scene to correct and restore the true colours (almost true) of the reef in the images, ensuring accurate visual representation ([example](https://dgkcolor.tools/product/wdkk)). Good to have, but not mandatory.

ðŸ”µ **Corner Markers** -- Metal stakes or similar objects (could even be bricks). We need to make sure we map the same area when come next time in a few months or years.

1. Best for nature: ideally we should not leave anything. If we use existing permanent objects (e.g. large rocks) it's the best for envirounment.

2. Best to find again: metal stakes with a small buoy. The buoy could be underwater close to the seabed, so that tourists wouldn't steal it.

3. Best for automation: make auto-detectable corner markers ([great example](https://github.com/Perry-Institute/ReefShape?tab=readme-ov-file#corner-markers)).

The choice ultimately depends on the site, local regulations, permits and your resources. We can process everything (co-register time-series 3D data) without using any markers, just make sure the imaging area is consistent over time.

ðŸ”µ **Transects** -- Guide you underwater when mapping the reef. For a 25x25m quadrat you could use 8 transect lines of 25m, or a combo of 50m and 25m lines.

ðŸ”µ **GPS** -- Capture location of Corner Markers from the surface, needed for georeferencing and to find the Corner Markers next time you dive.

ðŸ”µ **Dive computer** -- Measure the depth of Scalebars (and for diving of course).

ðŸ”µ **Compass** -- Navigate underwater when laying out Transects or installing Corner Markers.

ðŸ”µ **SMB** -- Surface Marker Buoy for safety and optionaly marking the corner of the quadrat.

# Setup

Let's set up all the equipment and prepare for imaging. This could be a team of 2-3 people.

<Warning>
  <h3>Please make sure you don't harm corals or marine life.</h3> Whatever you
  do in the water, avoid touching or disturbing any creatures -- there could be
  poisonous snakes, etc. Don't harass fish or other animals.
</Warning>

## 1. Camera

ðŸ”µ **Set the cameras** to Photo mode (Superphoto or Normal, best quality JPG).

ðŸ”µ **Set the interval** to take photos every 0.5 seconds.

<Note>
  We prefer RAW for better colour correction, but current GoPros can't shoot RAW
  every 0.5 seconds (the shortest interval is 3 seconds). If your camera can
  shoot RAW, use it, but note it takes up more space.
</Note>

## 2. Corner Markers

If you're doing a repeated survey and already have Corner Markers installed, just locate them underwater using GPS and snorkelling. You can skip this section and move to [Transects](#3-transects). Otherwise, follow the steps below to install them.

ðŸ”µ **Choose a site** that needs to be mapped. Think about how the quadrat will be placed and where its sides will end up.

ðŸ”µ **Install 4 Corner Markers** to define the survey area. This is usually done together with laying out Transects.

<Warning>
  If you need to hammer metal stakes or place concrete blocks as Corner Markers,
  choose an area without corals. You must have all necessary permits. Prefer
  using existing objects as markers if possible.
</Warning>

<Note>
  It's helpful to set up an SMB at one of the Corner Markers (on the deeper end)
  so you can easily find a starting point for imaging and signal boats that
  there are divers here.
</Note>

ðŸ”µ **Capture GPS coordinates** of all Corner Markers. This can be done anytime, usually by a snorkeller.

## 3. Transects

ðŸ”µ **Lay out outer Transects** to form the perimeter of the 25x25m quadrat. This can be done while installing Corner Markers.

Ideally, align the sides of the quadrat with cardinal directions (North/South or East/West) or parallel to the shore. Use a Compass to navigate and make 90-degree turns. A snorkeller can help guide this process from the surface.

When laying Transects, wrap the line around a rock or something every 10 meters to keep it from fluttering.

ðŸ”µ **Lay out inner Transects** every 5 meters.

<Warning>
  If the reef isn't flat, ensure the Transects are perpendicular to the slope.
  This prevents bouncing up and down during imaging -- which could cause
  decompression sickness.
</Warning>

<Note>
  You can set up multiple quadrats next to each other. This reduces the need for
  permanent Corner Markers and saves time by doing them all at once.
</Note>

## 4. Scalebars

ðŸ”µ **Evenly distribute Scalebars** across the quadrat. For example, place 4 in the corners and 1 in the centre. Ensure they're visible from different sides.

ðŸ”µ **Place Colour Charts** near Scalebars so they're easy to find.

ðŸ”µ **Measure the depth** of each Scalebar using your Dive Computer. Place the computer on the marker and note the depth, or take a photo for reference. Record the Scalebar identifier and depth, e.g., '007 - 3.5m'.

# Imaging

Let's map the reef! This can be done by a second team of two people, or by the same team if you don't have enough people. Follow these steps to take photos with two GoPros and create a 3D model of the coral reef.

<Warning>

**Avoid gaps in coverage!** The biggest challenge in this process is avoiding holes in the model caused by gaps in photo coverage. Don't worry -- we'll show you exactly how to prevent this as we explain the steps ahead.

</Warning>

## 1. Camera Setup

ðŸ”µ **Find the starting point** -- usually one of the corners on the deeper end. If there's an SMB (Surface Marker Buoy), start there.

ðŸ”µ **Check the camera rig** is stable and both cameras are facing the same way (downward).

ðŸ”µ **Turn on both cameras** before descending. Make sure they're set to Photo mode, taking pictures every 0.5 seconds.

ðŸ”µ **Press the record button** on both cameras once you're underwater and ready. It's okay if they're not perfectly synced.

ðŸ”µ **Confirm both cameras are working**. Look for a number increasing on the screen or a blinking red light.

## 2. Positioning

ðŸ”µ **Hold the camera rig** in front of you, keeping both cameras pointing straight down.

ðŸ”µ **Stay 1-2 meters above the reef**, aiming for 1.5 meters. This keeps everything in focus.

<Note>
  Everything farther than 31 cm (12 inches) will be sharp / in focus in GoPro.
</Note>

ðŸ”µ **Adjust your height based on the area**: swim closer (around 1 meter) for detailed photos of small or intricate corals, or when the visibility is bad, but be careful -- getting too close can create gaps on the sides. Swim higher (around 2 meters) for large, simple areas like soft coral or sand where details matter less.

ðŸ”µ **Keep the cameras level** with the reef unless you're capturing the sides of large corals (see section [4. Large Colonies](#4-large-colonies).

<Warning>
  Tilting the cameras can make distant parts look blue on the 3D model. Keep the
  cameras parallel to the surface, except when circling large corals or complex
  structures.
</Warning>

ðŸ”µ **Avoid capturing** your legs, fins, gear, or your buddy in the photos. These can confuse the 3D reconstruction algorithm.

## 3. Swimming Pattern

ðŸ”µ **Swim in a lawnmower pattern**: go back and forth across the area, like mowing a lawn, until you've covered the entire reef. You don't need to return to the starting point -- just finish once the whole area is photographed.

ðŸ”µ **Start and end outside the edges** by 1.5-2 meters to ensure full coverage.

ðŸ”µ **Keep each swim line** about 1.5 meters from the last one. This ensures photos overlap without too much duplication.

ðŸ”µ **When turning**, swim a bit farther out (1.5-2 meters) beyond Transect to avoid gaps.

ðŸ”µ **Swim at a steady speed** (0.5-1.5 m/s), but slightly slow down when capturing detailed areas and speed up when covering simpler areas (totally optional).

ðŸ”µ **Check every few minutes** that both cameras are still recording. Look for the red light blinking every 0.5 seconds. The screen will be black, so rely on the light.

<Note>
  Think of it like **spray painting the reef** -- you want to cover every part
  without missing spots.
</Note>

## 4. Large Colonies

ðŸ”µ **When you encounter a large coral or complex structure during your swim pattern**, swim over it as part of your regular back-and-forth lines, then pause briefly to swim in circles around it.

ðŸ”µ **Tilt the cameras** towards the structure while circling to capture its sides.

ðŸ”µ **Do multiple circles** at different heights if it's tall or intricate.

ðŸ”µ **Resume your regular swim pattern** right after, continuing where you left off.

<Note>
  This ensures the 3D model includes all sides of big or complex features
  without breaking your overall coverage flow.
</Note>

## 5. Finishing Up

ðŸ”µ **Stop recording** on both cameras once you've covered the entire area.

ðŸ”µ **Turn off the cameras** to save battery.

# Cleanup

ðŸ”µ Make sure we captured GPS coordinates of all Corner Markers and depths of Scalebars.

ðŸ”µ Collect all Scalebars, Transects and SMB. Make sure you don't leave anything except permanent Corner Markers.

# Upload

Now it's time to create a 3D model. You can process the data yourself, or we can help you with that. Navigate to wildflow.ai/upload (coming soon) and follow the instructions. One 25x25m quadrat is on average 10-20GB, which normally takes us a few hours to process.

# Tradeoffs

Modern SfM-based photogrammetry has become widely adopted for over a decade now. There's multiple data collection protocols. At the end of the day it's a solution optimising for multiple tradeoffs.

- We are aware of GoPro's slow rolling shutter speed â€“ the pixel column on the left side of the frame captures a moment in time different from the pixel column on the right side of the frame, causing less accurate geometry. We think it matters for millimetre resolution, but far away from being a problem for centimetre resolution. Thanks [Will Greene](https://github.com/wogreene) for pointing out.

- The main reason for two cameras is to avoid [bowl effect](https://www.google.com/search?q=bowl+effect+photogrammetry) when capturing a large area.

- We use Transects for navigation. If you imaging smaller area, e.g. 10x10m you can get away without them, followig reciprocal zig zag pattern.

# Thanks!

Enjoy mapping corals! Please feel free to ask any questions in our [Discord](http://wildflow.ai/discord) ðŸ¤—

Huge thanks to [John Stratford](https://x.com/JohnStratford_), [Jason Lynch](https://www.linkedin.com/in/jason-lynch-442575153), [Will Barnes](https://www.linkedin.com/in/william-barnes-a292b41a7) and [Ben Williams](https://www.linkedin.com/in/ben-williams-ucl) for sharing with me ideas and best practices on data collection protocol.
